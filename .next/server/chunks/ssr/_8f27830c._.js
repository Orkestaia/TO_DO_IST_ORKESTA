module.exports=[77379,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);async function e(){let a=new Date;a.getFullYear(),a.getMonth(),a.getDate();let b=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);return await c.prisma.task.findMany({where:{status:{not:"done"},OR:[{dueDate:{lte:b}},{status:"in_progress"}]},include:{project:!0},orderBy:[{priority:"asc"},{dueDate:"asc"}]})}async function f(a,b){let e="done"===b?"backlog":"done",f={status:e};"done"===e?f.completedAt=new Date:f.completedAt=null,await c.prisma.task.update({where:{id:a},data:f}),(0,d.revalidatePath)("/")}(0,a.i(13095).ensureServerEntryExports)([e,f]),(0,b.registerServerReference)(e,"00fdf5f731b090fd18f99f0c41dac8ab3b4df0ba2f",null),(0,b.registerServerReference)(f,"606fcb80ad4759892f4ecf56ed6ddbb6e4f2b44383",null),a.s(["getTodayTasks",()=>e,"toggleTaskStatus",()=>f])},29840,a=>{"use strict";var b=a.i(48284),c=a.i(77379),d=a.i(37936),e=a.i(66518),f=a.i(18558);async function g(a,b,c){if("in_progress"===b){let a=await e.prisma.project.findUnique({where:{id:c},include:{tasks:{where:{status:"in_progress"}}}}),b=a?.wipLimit||5;if(a&&a.tasks.length>=b)return{success:!1,error:"WIP Limit Reached"}}return await e.prisma.task.update({where:{id:a},data:{status:b,completedAt:"done"===b?new Date:null}}),(0,f.revalidatePath)(`/project/${c}`),{success:!0}}(0,a.i(13095).ensureServerEntryExports)([g]),(0,d.registerServerReference)(g,"70db91f896c794b8afd92ddae4b39327ec72fad328",null),a.s([],74851),a.i(74851),a.s(["009f2efe35c6bb3be99d405c8ec69f61ce0664efac",()=>b.getProjectsConfig,"606fcb80ad4759892f4ecf56ed6ddbb6e4f2b44383",()=>c.toggleTaskStatus,"70db91f896c794b8afd92ddae4b39327ec72fad328",()=>g],29840)}];

//# sourceMappingURL=_8f27830c._.js.map